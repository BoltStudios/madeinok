var ListingEditorCtrl=["$scope","$location","$http","$routeParams","AuthenticationService","Listing",function(e,t,r,a,n,o){e.formData={},e.listingId=a.id,e.listingId&&0==Object.keys(e.formData).length&&o.get({id:e.listingId},function(t){e.formData=t,e.loadProductTypes(t)},function(){}),e.currentPage=a.pageNumber||1,e.lastPageNumber=5,e.currentPage=~~e.currentPage>e.lastPageNumber||~~e.currentPage<1?1:~~e.currentPage,e.progress="50%",e.maxBlurbLength=250,e.companyTypes=["Technology","Agency","Dev Shop","Service Firm","Incubator/Accelerator","VC/Angel Fund","Other"],e.formData.companyType=e.companyTypes[0],e.productTypes=[{productType:"Website",value:!1},{productType:"Mobile App",value:!1},{productType:"Consumer Website",value:!1},{productType:"Games",value:!1},{productType:"Pharmaceutical",value:!1},{productType:"SaaS / PaaS / IaaS",value:!1},{productType:"Physical Product",value:!1},{productType:"Service Offering",value:!1},{productType:"Medical Device",value:!1},{productType:"Other",value:!1}],e.formData.productTypesOtherDescription="",e.formData.industryFocus={},e.industryFocuses=["Energy","Healthcare/Biotech","Retail/E-Commerice","Consumer Web","Gaming","Marketing/Advertising","IT","Media","Finance","Education","Sports","Travel","Business Services","Food","Other"],e.formData.industryFocus.option=e.industryFocuses[0],e.formData.industryFocus.description="",e.primaryCustomers=["Consumer","Business","Non-Profit","Public Sector","Other"],e.formData.primaryCustomer=e.primaryCustomers[0],e.fundingRounds=["None/Bootstrapped","Seed","Series A","Series B","Series C","Series D+"],e.formData.fundingRound=e.fundingRounds[0],e.totalRaisedValues=["","$0","<$100k","$100k - $499k","$500k - $999k","$1M - $5M","$5M - $10M","$10M+"],e.formData.totalRaised=e.totalRaisedValues[0],e.annualRevenues=["","Pre-revenue","<$100k","$100k - $499k","$500k - $999k","$1M - $5M","$5M - $10M","$10M+"],e.formData.annualRevenue=e.annualRevenues[0],e.formData.founders=[{name:"",email:"",title:""}],e.otherProductTypeChecked=function(){return e.productTypes[9].value},e.otherIndustrySelected=function(){return"Other"==e.formData.industryFocus},e.addFounder=function(){e.formData.founders.push({name:"",email:"",title:""})},e.submit=function(){e.formData.isPublished=!0,e.save()},e.save=function(t){e.info="Saving...",console.log(e.productTypes),e.saveProductTypes(),e.listingId?i(t):u(t),e.info="",e.success="Saved your changes"},e.saveProductTypes=function(){e.otherProductTypeChecked()||(e.formData.productTypesOtherDescription=""),e.formData.productTypes=e.productTypes},e.loadProductTypes=function(t){_.assign(e.productTypes,t.productTypes)};var u=function(t){e.saveProductTypes(),o.save({},e.formData,function(){}).$then(function(r){e.listingId=r.data._id,t&&t()},function(){})},i=function(t){o.save({id:e.listingId},e.formData,function(){}).$then(function(){t&&t()},function(){})},s=function(r){function a(){return null!=t.path().match(/\bcreate/)?"/create/"+r+"/":"/edit/"+r+"/"}return r||(r=e.listingId),a()};e.nextPage=function(){var r=function(){t.path(s()+ ++e.currentPage)};this.save(r),console.log("current page "+e.currentPage)},e.previousPage=function(){var r=function(){t.path(s()+--e.currentPage)};this.save(r)}}];