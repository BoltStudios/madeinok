var ListingCreateCtrl=["$scope","$location","$http","$routeParams","$injector","AuthenticationService",function(e,t,r,i,n,o){n.invoke(ListingEditorCtrl,this,{$scope:e}),e.title="Create a Listing",e.testLogIn=function(){var e={email:"hi",password:"haters"};o.logIn(e)},e.testIsLoggedIn=function(){console.log(o.isLoggedIn())}}],ListingEditCtrl=["$scope","$location","$http","$routeParams","$injector",function(e,t,r,i,n){n.invoke(ListingEditorCtrl,this,{$scope:e}),e.title="Edit Your Listing"}],ListingEditorCtrl=["$scope","$location","$http","$routeParams","AuthenticationService","Listing",function(e,t,r,i,n,o){e.formData={},e.listingId=i.id,e.listingId&&0==Object.keys(e.formData).length&&o.get({id:e.listingId},function(t){e.formData=t,e.loadProductTypes(t)},function(){}),e.currentPage=i.pageNumber||1,e.lastPageNumber=5,e.currentPage=~~e.currentPage>e.lastPageNumber||~~e.currentPage<1?1:~~e.currentPage,e.progress="50%",e.maxBlurbLength=250,e.companyTypes=["Technology","Agency","Dev Shop","Service Firm","Incubator/Accelerator","VC/Angel Fund","Other"],e.formData.companyType=e.companyTypes[0],e.productTypes=[{productType:"Website",value:!1},{productType:"Mobile App",value:!1},{productType:"Consumer Website",value:!1},{productType:"Games",value:!1},{productType:"Pharmaceutical",value:!1},{productType:"SaaS / PaaS / IaaS",value:!1},{productType:"Physical Product",value:!1},{productType:"Service Offering",value:!1},{productType:"Medical Device",value:!1},{productType:"Other",value:!1}],e.formData.productTypesOtherDescription="",e.formData.industryFocus={},e.industryFocuses=["Energy","Healthcare/Biotech","Retail/E-Commerice","Consumer Web","Gaming","Marketing/Advertising","IT","Media","Finance","Education","Sports","Travel","Business Services","Food","Other"],e.formData.industryFocus.option=e.industryFocuses[0],e.formData.industryFocus.description="",e.primaryCustomers=["Consumer","Business","Non-Profit","Public Sector","Other"],e.formData.primaryCustomer=e.primaryCustomers[0],e.fundingRounds=["None/Bootstrapped","Seed","Series A","Series B","Series C","Series D+"],e.formData.fundingRound=e.fundingRounds[0],e.totalRaisedValues=["","$0","<$100k","$100k - $499k","$500k - $999k","$1M - $5M","$5M - $10M","$10M+"],e.formData.totalRaised=e.totalRaisedValues[0],e.annualRevenues=["","Pre-revenue","<$100k","$100k - $499k","$500k - $999k","$1M - $5M","$5M - $10M","$10M+"],e.formData.annualRevenue=e.annualRevenues[0],e.formData.founders=[{name:"",email:"",title:""}],e.otherProductTypeChecked=function(){return e.productTypes[9].value},e.otherIndustrySelected=function(){return"Other"==e.formData.industryFocus},e.addFounder=function(){e.formData.founders.push({name:"",email:"",title:""})},e.submit=function(){e.formData.isPublished=!0,e.save()},e.save=function(t){e.info="Saving...",console.log(e.productTypes),e.saveProductTypes(),e.listingId?a(t):s(t),e.info="",e.success="Saved your changes"},e.saveProductTypes=function(){e.otherProductTypeChecked()||(e.formData.productTypesOtherDescription=""),e.formData.productTypes=e.productTypes},e.loadProductTypes=function(t){_.assign(e.productTypes,t.productTypes)};var s=function(t){e.saveProductTypes(),o.save({},e.formData,function(){}).$then(function(r){e.listingId=r.data._id,t&&t()},function(){})},a=function(t){o.save({id:e.listingId},e.formData,function(){}).$then(function(){t&&t()},function(){})},u=function(r){function i(){return null!=t.path().match(/\bcreate/)?"/create/"+r+"/":"/edit/"+r+"/"}return r||(r=e.listingId),i()};e.nextPage=function(){var r=function(){t.path(u()+ ++e.currentPage)};this.save(r),console.log("current page "+e.currentPage)},e.previousPage=function(){var r=function(){t.path(u()+--e.currentPage)};this.save(r)}}],ListingIndexCtrl=["$scope","$http","Listing","$routeParams",function(e,t,r){e.count=0,e.listings=r.query(),e.hasError=function(){return 1==e.listings.length&&e.listings[0].error},e.destroy=function(t){console.log("deleting"),r.delete({id:t},function(){e.listings=_.filter(e.listings,function(e){return e._id!=t})})}}],ListingViewCtrl=["$scope","$http","$routeParams","Listing",function(e,t,r,i){e.title="hello",e.item=i.get({id:r.id}),e.isVowel=function(e){var t=e.toLowercase();return"a"==t||"e"==t||"i"==t||"o"==t||"u"==t}}],app=angular.module("ListApp",["ngResource","ngCookies","authentication-service","session-service","listing-factory"]).config(["$routeProvider","$locationProvider",function(e){e.when("/",{controller:ListingIndexCtrl,templateUrl:"/listings/index"}).when("/create",{controller:ListingCreateCtrl,templateUrl:"/listings/editor",resolve:SessionMaster.resolve}).when("/create/:id/:pageNumber",{controller:ListingCreateCtrl,templateUrl:"/listings/editor",resolve:SessionMaster.resolve}).when("/create/:pageNumber",{controller:ListingCreateCtrl,templateUrl:"/listings/editor",resolve:SessionMaster.resolve}).when("/edit/:id",{controller:ListingEditCtrl,templateUrl:"/listings/editor",resolve:SessionMaster.resolve}).when("/edit/:id/:pageNumber",{controller:ListingEditCtrl,templateUrl:"/listings/editor",resolve:SessionMaster.resolve}).when("/view/:id",{controller:ListingViewCtrl,templateUrl:"listings/view"}).otherwise({redirectTo:"/"})}]).directive("maxlengthlimit",function(){return{require:"ngModel",link:function(e,t,r,i){function n(e){if(e&&e.length>o){var t=e.substring(0,o);return i.$setViewValue(t),i.$render(),t}return e}var o=Number(r.maxlengthlimit);i.$parsers.push(n)}}}).directive("integerInput",function(){return{require:"ngModel",link:function(e,t,r,i){function n(e){var t=e.replace(/[^0-9]/g,"");return t!=e&&(i.$setViewValue(t),i.$render()),t}i.$parsers.push(n)}}});